# +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
# title      Circle CI Build Configuration                      +
# project    icecore-hashids                                    +
# repository https://github.com/arcticicestudio/icecore-hashids +
# author     Arctic Ice Studio                                  +
# email      development@arcticicestudio.com                    +
# copyright  Copyright (C) 2017                                 +
# +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#
# [References]
# Circle CI
#   https://circleci.com/docs
machine:
  java:
    version: oraclejdk8

general:
  artifacts:
    - ./target/*.jar

dependencies:
  post:
    - mvn --version

test:
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - find . -type f -regex ".*/target/surefire-reports/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;
  override:
    - mvn -B clean verify -P node,code-coverage
    - find . -type f -regextype posix-egrep -regex ".*/target/(.*asc|.*jar|.*md5|.*pom|.*sha1)" -exec cp {} $CIRCLE_ARTIFACTS \;
